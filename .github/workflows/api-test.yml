name: FastAPI CI Test

# Trigger the action whenever you push to the 'main' branch
on:
    push:
        branches: ["main"]
    pull_request:
        branches: ["main"]

jobs:
    test-api:
        runs-on: ubuntu-latest # The machine GitHub provides

        steps:
            # 1. Check out your code onto the machine
            - name: Checkout code
              uses: actions/checkout@v4

            # 2. Install Python
            - name: Set up Python
              uses: actions/setup-python@v5
              with:
                  python-version: "3.9"

            # 3. Install your dependencies
            - name: Install dependencies
              run: |
                  python -m pip install --upgrade pip
                  pip install fastapi[standard] httpx pytest

            # 4. Run the test we created in Step 1
            - name: Run Tests
              run: |
                  pytest
